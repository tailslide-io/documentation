"use strict";(self.webpackChunktailslide_documentation=self.webpackChunktailslide_documentation||[]).push([[767],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),g=l,_=u["".concat(o,".").concat(g)]||u[g]||d[g]||r;return n?a.createElement(_,i(i({ref:t},c),{},{components:n})):a.createElement(_,i({ref:t},c))}));function g(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=u;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5660:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>p,toc:()=>s});var a=n(7462),l=(n(7294),n(3905));const r={sidebar_position:2},i="Tower",p={unversionedId:"Additional Documentation/Tower",id:"Additional Documentation/Tower",title:"Tower",description:"To run locally",source:"@site/docs/5 - Additional Documentation/Tower.md",sourceDirName:"5 - Additional Documentation",slug:"/Additional Documentation/Tower",permalink:"/documentation/Additional Documentation/Tower",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Description",permalink:"/documentation/Additional Documentation/Description"},next:{title:"Aerobat",permalink:"/documentation/Additional Documentation/Aerobat"}},o={},s=[{value:"Start NATS Jetstream",id:"start-nats-jetstream",level:2},{value:"Start Redis Time Series Database",id:"start-redis-time-series-database",level:2},{value:"Start PostgreSQL Database",id:"start-postgresql-database",level:2},{value:"Start Backend",id:"start-backend",level:2},{value:"Start Frontend",id:"start-frontend",level:2},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Apps",id:"apps",level:3},{value:"<code>GET /apps</code>",id:"get-apps",level:4},{value:"<code>GET apps/:appId</code>",id:"get-appsappid",level:4},{value:"<code>POST /apps</code>",id:"post-apps",level:4},{value:"<code>PATCH /apps/:appId</code>",id:"patch-appsappid",level:4},{value:"<code>DELETE /apps/:appId</code>",id:"delete-appsappid",level:4},{value:"Flags",id:"flags",level:3},{value:"<code>GET /apps/:appId/flags</code>",id:"get-appsappidflags",level:4},{value:"<code>GET /flags/:flagId</code>",id:"get-flagsflagid",level:4},{value:"<code>POST /apps/:appId/flags</code>",id:"post-appsappidflags",level:4},{value:"<code>PATCH /flags/:flagId</code>",id:"patch-flagsflagid",level:4},{value:"<code>PATCH /flags/:flagId/toggle</code>",id:"patch-flagsflagidtoggle",level:4},{value:"<code>DELETE /flags/:flagId</code>",id:"delete-flagsflagid",level:4},{value:"<code>POST /flags/circuit/:flagId/open</code>",id:"post-flagscircuitflagidopen",level:4},{value:"<code>POST /flags/circuit/:flagId/close</code>",id:"post-flagscircuitflagidclose",level:4},{value:"Logs",id:"logs",level:3},{value:"<code>GET /logs</code>",id:"get-logs",level:4},{value:"<code>GET /logs/:appId</code>",id:"get-logsappid",level:4},{value:"Keys",id:"keys",level:3},{value:"<code>GET /keys</code>",id:"get-keys",level:4},{value:"<code>POST /keys</code>",id:"post-keys",level:4},{value:"Redis Timeseries",id:"redis-timeseries",level:3},{value:"<code>GET /flags/:flagId/timeseries</code>",id:"get-flagsflagidtimeseries",level:4}],c={toc:s};function d(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"tower"},"Tower"),(0,l.kt)("p",null,"To run locally"),(0,l.kt)("p",null,"Clone main branch of repository"),(0,l.kt)("p",null,"Sample ",(0,l.kt)("inlineCode",{parentName:"p"},".env")," file to add into the server directory"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"PORT=3001\n\nPGHOST='localhost'\nPGUSER='postgres'\nPGDATABASE='tower'\nPGPASSWORD='secret'\nPGPORT=5432\n\nNATS_SERVER='nats://127.0.0.1:4222'\nSDK_KEY='myToken'\n\nREDIS_SERVER='{\"socket\":{\"host\":\"localhost\"}}' \n")),(0,l.kt)("p",null,"Sample ",(0,l.kt)("inlineCode",{parentName:"p"},".env")," file to add into the client directory"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"REACT_APP_NATS_WS_SERVER='ws://0.0.0.0:8080'\nREACT_APP_SDK_KEY='myToken'\n")),(0,l.kt)("h2",{id:"start-nats-jetstream"},"Start NATS Jetstream"),(0,l.kt)("p",null,"Install ",(0,l.kt)("a",{parentName:"p",href:"https://docs.nats.io/running-a-nats-service/introduction/installation"},"NATS")),(0,l.kt)("p",null,"From Tower root directory in separate terminal run ",(0,l.kt)("inlineCode",{parentName:"p"},"nats-server -c nats.conf")),(0,l.kt)("p",null,"to stop a nats server run ",(0,l.kt)("inlineCode",{parentName:"p"},"nats-server --signal quit")),(0,l.kt)("p",null,"to delete stream messages run ",(0,l.kt)("inlineCode",{parentName:"p"},"nats stream purge")),(0,l.kt)("h2",{id:"start-redis-time-series-database"},"Start Redis Time Series Database"),(0,l.kt)("p",null,"Install ",(0,l.kt)("a",{parentName:"p",href:"https://redis.io/docs/stack/timeseries/quickstart/"},"Redis")),(0,l.kt)("p",null,"From any directory in separate terminal run ",(0,l.kt)("inlineCode",{parentName:"p"},"docker run -p 6379:6379 -it --rm redislabs/redistimeseries")),(0,l.kt)("h2",{id:"start-postgresql-database"},"Start PostgreSQL Database"),(0,l.kt)("p",null,"Install ",(0,l.kt)("a",{parentName:"p",href:"https://www.postgresql.org/download/"},"PostgreSQL")),(0,l.kt)("p",null,"From any directory run ",(0,l.kt)("inlineCode",{parentName:"p"},"brew services start postgresql")),(0,l.kt)("h2",{id:"start-backend"},"Start Backend"),(0,l.kt)("p",null,"From the server directory ",(0,l.kt)("inlineCode",{parentName:"p"},"npm install")),(0,l.kt)("p",null,"From the server directory run ",(0,l.kt)("inlineCode",{parentName:"p"},"npm run dev")),(0,l.kt)("p",null,"The backend app is now available at ",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:3001")),(0,l.kt)("h2",{id:"start-frontend"},"Start Frontend"),(0,l.kt)("p",null,"From the server directory ",(0,l.kt)("inlineCode",{parentName:"p"},"npm install")),(0,l.kt)("p",null,"From the server directory run ",(0,l.kt)("inlineCode",{parentName:"p"},"npm start")),(0,l.kt)("p",null,"The frontend app is now available at ",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:3000")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"api-endpoints"},"API Endpoints"),(0,l.kt)("p",null,"All requests and responses are in json"),(0,l.kt)("h3",{id:"apps"},"Apps"),(0,l.kt)("h4",{id:"get-apps"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /apps")),(0,l.kt)("p",null,"Returns all apps"),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": [\n    {\n      "id": 1,\n      "title": "First app",\n      "created_at": "2022-08-11T18:13:55.106Z",\n      "updated_at": "2022-08-11T18:13:55.106Z"\n    },\n    {\n      "id": 2,\n      "title": "Second App",\n      "created_at": "2022-08-11T18:27:17.068Z",\n      "updated_at": "2022-08-11T18:27:17.068Z"\n    }\n  ]\n}\n')),(0,l.kt)("h4",{id:"get-appsappid"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET apps/:appId")),(0,l.kt)("p",null,"Returns the app with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"appId")),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 2,\n    "title": "Second App",\n    "created_at": "2022-08-11T18:27:17.068Z",\n    "updated_at": "2022-08-11T18:27:17.068Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"post-apps"},(0,l.kt)("inlineCode",{parentName:"h4"},"POST /apps")),(0,l.kt)("p",null,"Creates a new app"),(0,l.kt)("p",null,"Example Request:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "First App"\n}\n')),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "title": "First App",\n    "id": 1,\n    "created_at": "2022-08-11T18:27:17.068Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"patch-appsappid"},(0,l.kt)("inlineCode",{parentName:"h4"},"PATCH /apps/:appId")),(0,l.kt)("p",null,"Updates the app with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"appId")),(0,l.kt)("p",null,"Example Request:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "App with Edited name"\n}\n')),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 2,\n    "title": "App with Edited name",\n    "created_at": "2022-08-11T18:27:17.068Z",\n    "updated_at": "2022-08-11T18:42:19.981Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"delete-appsappid"},(0,l.kt)("inlineCode",{parentName:"h4"},"DELETE /apps/:appId")),(0,l.kt)("p",null,"Deletes the app with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"appId")),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 2,\n    "title": "App with Edited name",\n    "created_at": "2022-08-11T18:27:17.068Z",\n    "updated_at": "2022-08-11T18:42:19.981Z"\n  }\n}\n')),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"flags"},"Flags"),(0,l.kt)("h4",{id:"get-appsappidflags"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /apps/:appId/flags")),(0,l.kt)("p",null,"Returns all flags ruleset data belonging to a specific app"),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": [\n    {\n      "id": 1,\n      "app_id": 1,\n      "title": "App 1 Flag 1",\n      "description": "",\n      "is_active": false,\n      "rollout_percentage": 100,\n      "white_listed_users": "",\n      "error_threshold_percentage": 50,\n      "circuit_status": "open",\n      "is_recoverable": false,\n      "circuit_recovery_percentage": 100,\n      "circuit_recovery_delay": 100,\n      "circuit_initial_recovery_percentage": 10,\n      "circuit_recovery_rate": 100,\n      "circuit_recovery_increment_percentage": 0.1,\n      "circuit_recovery_profile": "linear",\n      "webhooks": "",\n      "created_at": "2022-08-11T18:51:52.882Z",\n      "updated_at": "2022-08-11T18:51:52.882Z"\n    },\n    {\n      "id": 2,\n      "app_id": 1,\n      "title": "App 1 Flag 2",\n      "description": "",\n      "is_active": false,\n      "rollout_percentage": 100,\n      "white_listed_users": "",\n      "error_threshold_percentage": 50,\n      "circuit_status": "open",\n      "is_recoverable": false,\n      "circuit_recovery_percentage": 100,\n      "circuit_recovery_delay": 100,\n      "circuit_initial_recovery_percentage": 10,\n      "circuit_recovery_rate": 100,\n      "circuit_recovery_increment_percentage": 0.1,\n      "circuit_recovery_profile": "linear",\n      "webhooks": "",\n      "created_at": "2022-08-11T18:52:27.200Z",\n      "updated_at": "2022-08-11T18:52:27.200Z"\n    }\n  ]\n}\n')),(0,l.kt)("h4",{id:"get-flagsflagid"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /flags/:flagId")),(0,l.kt)("p",null,"Returns the flag with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"flagId")," and its ruleset data"),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 1,\n    "title": "App 1 Flag 1",\n    "app_id": 1,\n    "is_active": false,\n    "description": "",\n    "rollout_percentage": 100,\n    "white_listed_users": "",\n    "webhooks": "",\n    "circuit_status": "open",\n    "is_recoverable": false,\n    "error_threshold_percentage": 50,\n    "circuit_recovery_percentage": 100,\n    "circuit_recovery_delay": 100,\n    "circuit_initial_recovery_percentage": 10,\n    "circuit_recovery_rate": 100,\n    "circuit_recovery_increment_percentage": 0.1,\n    "circuit_recovery_profile": "linear",\n    "created_at": "2022-08-11T18:51:52.882Z",\n    "updated_at": "2022-08-11T18:51:52.882Z",\n    "logs": [\n      {\n        "log_id": 1,\n        "flag_id": 1,\n        "log_description": "Flag Created",\n        "action_type": "create",\n        "created_at": "2022-08-11T18:51:52.887Z",\n        "updated_at": "2022-08-11T18:51:52.887Z"\n      }\n    ]\n  }\n}\n')),(0,l.kt)("h4",{id:"post-appsappidflags"},(0,l.kt)("inlineCode",{parentName:"h4"},"POST /apps/:appId/flags")),(0,l.kt)("p",null,"Creates a new flag"),(0,l.kt)("p",null,"Successfully creating a flag with ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," will also create a new log. All flags are initially created in an 'off' toggle state."),(0,l.kt)("p",null,"Example Request:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "App 1 Flag 1",\n  "rollout_percentage": 100,\n  "circuit_recovery_percentage": 100,\n  "error_threshold_percentage": 50\n\n}\n')),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 1,\n    "app_id": 1,\n    "title": "App 1 Flag 1",\n    "description": "",\n    "is_active": false,\n    "rollout_percentage": 100,\n    "white_listed_users": "",\n    "error_threshold_percentage": 50,\n    "circuit_status": "open",\n    "is_recoverable": false,\n    "circuit_recovery_percentage": 100,\n    "circuit_recovery_delay": 100,\n    "circuit_initial_recovery_percentage": 10,\n    "circuit_recovery_rate": 100,\n    "circuit_recovery_increment_percentage": 0.1,\n    "circuit_recovery_profile": "linear",\n    "webhooks": "",\n    "created_at": "2022-08-11T18:51:52.882Z",\n    "updated_at": "2022-08-11T18:51:52.882Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"patch-flagsflagid"},(0,l.kt)("inlineCode",{parentName:"h4"},"PATCH /flags/:flagId")),(0,l.kt)("p",null,"Updates the flag with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"flagId")),(0,l.kt)("p",null,"Successfully updating a flag with ",(0,l.kt)("inlineCode",{parentName:"p"},"PATCH")," will create a new log."),(0,l.kt)("p",null,"Example Request:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "App 1 Flag 1",\n  "rollout_percentage": 50,\n  "circuit_status": "close",\n  "is_active": false,\n  "is_recoverable": true,\n  "circuit_initial_recovery_percentage": 10,\n  "circuit_recovery_increment_percentage": 10,\n  "circuit_recovery_percentage": 10,\n  "error_threshold_percentage": 40,\n  "circuit_recovery_rate": 400,\n  "circuit_recovery_profile": "linear",\n  "circuit_recovery_delay": 8000,\n  "webhooks": "https://hooks.slack.com/services/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"\n}\n')),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 1,\n    "app_id": 1,\n    "title": "App 1 Flag 1",\n    "description": "",\n    "is_active": false,\n    "rollout_percentage": 50,\n    "white_listed_users": "",\n    "error_threshold_percentage": 40,\n    "circuit_status": "open",\n    "is_recoverable": true,\n    "circuit_recovery_percentage": 10,\n    "circuit_recovery_delay": 8000,\n    "circuit_initial_recovery_percentage": 10,\n    "circuit_recovery_rate": 400,\n    "circuit_recovery_increment_percentage": 10,\n    "circuit_recovery_profile": "linear",\n    "webhooks": "https://hooks.slack.com/services/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",\n    "created_at": "2022-08-11T18:51:52.882Z",\n    "updated_at": "2022-08-11T18:56:12.441Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"patch-flagsflagidtoggle"},(0,l.kt)("inlineCode",{parentName:"h4"},"PATCH /flags/:flagId/toggle")),(0,l.kt)("p",null,"Toggles the ",(0,l.kt)("inlineCode",{parentName:"p"},"is_active")," state of a flag with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"flagId")," on or off"),(0,l.kt)("p",null,"Successfully toggling a flag with ",(0,l.kt)("inlineCode",{parentName:"p"},"PATCH")," will create a new log."),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": 1,\n    "app_id": 1,\n    "title": "App 1 Flag 1",\n    "description": "",\n    "is_active": false,\n    "rollout_percentage": 50,\n    "white_listed_users": "",\n    "error_threshold_percentage": 40,\n    "circuit_status": "open",\n    "is_recoverable": true,\n    "circuit_recovery_percentage": 10,\n    "circuit_recovery_delay": 8000,\n    "circuit_initial_recovery_percentage": 10,\n    "circuit_recovery_rate": 400,\n    "circuit_recovery_increment_percentage": 10,\n    "circuit_recovery_profile": "linear",\n    "webhooks": "https://hooks.slack.com/services/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",\n    "created_at": "2022-08-11T18:51:52.882Z",\n    "updated_at": "2022-08-11T19:03:47.457Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"delete-flagsflagid"},(0,l.kt)("inlineCode",{parentName:"h4"},"DELETE /flags/:flagId")),(0,l.kt)("p",null,"Deletes the flag with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"flagId")),(0,l.kt)("p",null,"Successfully deleting a flag with ",(0,l.kt)("inlineCode",{parentName:"p"},"DELETE")," will create a new log."),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": 1\n}\n')),(0,l.kt)("h4",{id:"post-flagscircuitflagidopen"},(0,l.kt)("inlineCode",{parentName:"h4"},"POST /flags/circuit/:flagId/open")),(0,l.kt)("p",null,"Trips the circuit of a flag with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"flagId")," open"),(0,l.kt)("p",null,"Successfully opening a circuit with ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," will create a new log."),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": 1\n}\n')),(0,l.kt)("h4",{id:"post-flagscircuitflagidclose"},(0,l.kt)("inlineCode",{parentName:"h4"},"POST /flags/circuit/:flagId/close")),(0,l.kt)("p",null,"Trips the circuit of a flag with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"flagId")," closed"),(0,l.kt)("p",null,"Successfully closing a circuit with ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," will create a new log."),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": 1\n}\n')),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"logs"},"Logs"),(0,l.kt)("h4",{id:"get-logs"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /logs")),(0,l.kt)("p",null,"Returns all logs"),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": [\n    {\n      "log_id": 4,\n      "flag_id": 1,\n      "flag_title": "App 1 Flag 1",\n      "log_description": "Circuit Tripped Open",\n      "action_type": "circuit_open",\n      "created_at": "2022-08-11T19:27:29.104Z",\n      "updated_at": "2022-08-11T19:27:29.104Z"\n    },\n    {\n      "log_id": 3,\n      "flag_id": 1,\n      "flag_title": "App 1 Flag 1",\n      "log_description": "Circuit Closed",\n      "action_type": "circuit_close",\n      "created_at": "2022-08-11T19:25:36.826Z",\n      "updated_at": "2022-08-11T19:25:36.826Z"\n    },\n    {\n      "log_id": 2,\n      "flag_id": 2,\n      "flag_title": "App 1 Flag 2",\n      "log_description": "Flag Created",\n      "action_type": "create",\n      "created_at": "2022-08-11T19:25:13.614Z",\n      "updated_at": "2022-08-11T19:25:13.614Z"\n    },\n    {\n      "log_id": 1,\n      "flag_id": 1,\n      "flag_title": "App 1 Flag 1",\n      "log_description": "Flag Created",\n      "action_type": "create",\n      "created_at": "2022-08-11T19:25:05.345Z",\n      "updated_at": "2022-08-11T19:25:05.345Z"\n    }\n  ]\n}\n')),(0,l.kt)("h4",{id:"get-logsappid"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /logs/:appId")),(0,l.kt)("p",null,"Returns all logs belonging to an app with a matching ",(0,l.kt)("inlineCode",{parentName:"p"},"appId")),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": [\n    {\n      "id": 1,\n      "flag_id": 1,\n      "app_id": 1,\n      "description": "Flag Created",\n      "action_type": "create",\n      "flag_title": "App 1 Flag 1",\n      "flag_description": "",\n      "created_at": "2022-08-11T19:25:05.345Z",\n      "updated_at": "2022-08-11T19:25:05.345Z"\n    },\n    {\n      "id": 3,\n      "flag_id": 1,\n      "app_id": 1,\n      "description": "Circuit Closed",\n      "action_type": "circuit_close",\n      "flag_title": "App 1 Flag 1",\n      "flag_description": "",\n      "created_at": "2022-08-11T19:25:36.826Z",\n      "updated_at": "2022-08-11T19:25:36.826Z"\n    }\n  ]\n}\n')),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"keys"},"Keys"),(0,l.kt)("h4",{id:"get-keys"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /keys")),(0,l.kt)("p",null,"Returns a SDK key"),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": "70a90b16-201c-4466-8dc9-5f5c620d5732",\n    "created_at": "2022-08-11T19:37:46.595Z",\n    "updated_at": "2022-08-11T19:37:46.595Z"\n  }\n}\n')),(0,l.kt)("h4",{id:"post-keys"},(0,l.kt)("inlineCode",{parentName:"h4"},"POST /keys")),(0,l.kt)("p",null,"Creates a SDK key"),(0,l.kt)("p",null,"Example Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    "id": "3e381b25-7686-4847-b861-5ec9b87378f1",\n    "created_at": "2022-08-11T19:37:13.391Z",\n    "updated_at": "2022-08-11T19:37:13.391Z"\n  }\n}\n')),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"redis-timeseries"},"Redis Timeseries"),(0,l.kt)("h4",{id:"get-flagsflagidtimeseries"},(0,l.kt)("inlineCode",{parentName:"h4"},"GET /flags/:flagId/timeseries")),(0,l.kt)("p",null,"Returns success/failure counts for a specified flag grouped into time buckets within a selected window of time"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "payload": {\n    [\n      { "timestamp": 1661264546556, "success": 137, "failure": 4 },\n      { "timestamp": 1661264549556, "success": 134, "failure": 6 },\n      { "timestamp": 1661264552556, "success": 138, "failure": 3 },\n      { "timestamp": 1661264555556, "success": 136, "failure": 5 },\n      { "timestamp": 1661264558556, "success": 131, "failure": 9 },\n      { "timestamp": 1661264561556, "success": 135, "failure": 6 },\n      { "timestamp": 1661264564556, "success": 130, "failure": 10 },\n      { "timestamp": 1661264567556, "success": 130, "failure": 11 },\n      { "timestamp": 1661264570556, "success": 137, "failure": 3 },\n      { "timestamp": 1661264573556, "success": 132, "failure": 9 }\n    ]\n  }\n}\n')))}d.isMDXComponent=!0}}]);